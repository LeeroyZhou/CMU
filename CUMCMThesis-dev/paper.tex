%\documentclass{cumcmthesis}

\documentclass[withoutpreface,bwprint]{cumcmthesis} %去掉封面与编号页
\usepackage{multirow}
\usepackage{longtable}
    \title{“拍照赚钱”APP的定价模型}
    \tihao{A}            % 题号
    \baominghao{042}    % 报名号
    \schoolname{武汉大学}
    \membera{周澳}
    \memberb{傅宇千}
    \memberc{刘志豪}
    \supervisor{指导老师}
    \yearinput{2020}     % 年
    \monthinput{08}      % 月
    \dayinput{21}        % 日

\begin{document}

\maketitle
\begin{abstract}
    “拍照赚钱”APP是一种自助式劳务众包平台，平台通过把信息收集工作分包到每个注册会员去完成。为了用尽可能少的成本完成更多的信息收集任务，平台需要解决任务定价的优化模型问题。

    问题一要求研究已经完成项目中的任务定价规律，并分析其中有大量问完成任务的原因。本文提出与任务定价有关的影响因子有任务的位置、任务分布的密度、会员的位置、会员的任务完成能力。我们通过K-均值分析及灰色相关度分析确定这些因子与定价的相关度，经过计算相关度均大于0.9。另外，通过计算完成和未完成任务的相关度，我们可以得出定价没有充足考虑任务所在区域的会员人数是导致任务未被完成的主要原因。

    

    \keywords{劳务众包\quad  聚类分析\quad   灰色关联分析\quad   多目标优化\quad  }
\end{abstract}
%\tableofcontents
\section{问题重述}
“拍照赚钱”APP是一种基于移动互联网的自助式劳务众包平台，为企业提供各种商业检查和信息搜集服务。用户注册成为APP的会员，然后从APP上领取需要拍照的任务，赚取任务标定的酬金。APP中的任务定价是其运行的核心要素，如果定价不合理，有的任务就会无人问津，而导致商品检查的失败。

附件一是一个已结束项目的任务数据，包含了每个任务的位置、定价和完成情况（“1”表示完成，“0”表示未完成）；附件二是会员信息数据，包含了会员的位置、信誉值、参考其信誉给出的任务开始预订时间和预订限额，原则上会员信誉越高，越优先开始挑选任务，其配额也就越大（任务分配时实际上是根据预订限额所占比例进行配发）；附件三是一个新的检查项目任务数据，只有任务的位置信息。根据以上内容提出如下四个问题：

\begin{enumerate}
    \item 研究附件一中项目的任务定价规律，分析任务未完成的原因。
    \item 为附件一中的项目设计新的任务定价方案，并和原方案进行比较。
    \item 实际情况下，多个任务可能因为位置比较集中，导致用户会争相选择，一种考虑是将这些任务联合在一起打包发布。在这种考虑下，如何修改前面的定价模型，对最终的任务完成情况又有什么影响？
    \item 对附件三中的新项目给出你的任务定价方案，并评价该方案的实施效果。
\end{enumerate}

\section{符号说明}
\begin{center}
    \begin{tabular}{cc}
        \hline
        \makebox[0.3\textwidth][c]{符号} & \makebox[0.4\textwidth][c]{意义}      \\ \hline
        $cp_k$                           & 第$k$名会员的任务完成能力             \\ \hline
        $\overline{cp_i}$                & 第$i$项任务所在网格内会员平均完成能力 \\ \hline
        $p_i$                            & 第$i$个任务的定价                     \\ \hline
        $C_i$                            & 第$i$个任务是否被完成的0-1变量        \\ \hline
        $w_{ij}$                         & 任务$i$对会员$j$的吸引度              \\ \hline
        $l_{ij}$                         & 任务$i$与会员$j$之间的距离            \\ \hline
        $choice(j)$                      & 会员$j$在预定任务时的选择             \\ \hline
        $belong(k)$                      & 完成第$k$个任务的会员                 \\ \hline
        $G_j$                            & 会员$j$的信誉值                       \\ \hline
        注：未列出及重复的符号以出现出为准
    \end{tabular}
\end{center}

\section{模型假设}
\begin{enumerate}
    \item 每个任务的工作量基本相同
    \item 会员成功预定的任务都会完成
\end{enumerate}

\section{问题一的建模与求解}

\subsection{问题一的分析}
问题一要求研究已经完成项目中的任务定价规律，并分析其中有大量问完成任务的原因。附件一给出的项目属于结果已经确定的问题，我们需要根据每个任务的定价信息与相关影响因子进行统计分析，从而建立该项目中任务的定价规律。根据经济学原理，市场上一种服务的价格与服务含有的劳动和供求关系有关；本题的数据中能构成对价格的影响因子有任务的位置、任务分布的密度、会员的位置、会员的信誉配额。其中任务与会员的距离和完成任务付出的劳动有关，会员配额、会员和任务的分布密度与供求关系有关。对于“拍照赚钱”的劳务服务，如果假设每个任务的拍照所需的劳动量大致相同，那么会员做不同的任务付出多少的区别便主要来自会员到达任务地点路程远近。对于供求关系，这应当是一个区域性的因素，也就是一个任务的定价受到的供求关系影响主要来自其周边区域，因此我们可以用任务所在区域的任务数密度、会员数密度和会员的信誉值和工作能力来反映。根据以上分析，我们提出以下四种影响任务定价的因素：任务位置、任务所在区域的任务密度，任务所在区域的会员密度，任务所在区域会员的完成能力。通过相关性分析，我们可以得到这些因素与任务定价之间的规律。再通过计算完成的任务与未完成的任务的相关度矩阵的差别，可以分析出一些任务未被完成的原因。

\subsection{建模前的数据分析}
我们首先使用Global Mapper软件把已完成的项目中的每个任务用散点图标注在地图上，用户的位置也同样标注，如下图（红色为未完成任务，绿色为已完成的任务，黄色为用户）

\begin{figure}[H]
    \centering
    \includegraphics[width=15cm]{1.png}
    \caption{K-均值分析得到的任务中心点}
    \label{图}
\end{figure}
可以发现，任务和用户在城市和道路旁较为集中，其他地方较为分散，主要集中在广州、佛山、东莞、深圳等城市。也有几个用户的地理位置远远超出有任务的区域，应当进行去除。

我们把任务对应的定价在散点图上进行了标注，我们通过观察发现，越靠近城市繁华地带，任务和用户越密集，任务的定价也越低。我们猜想这是由于城市内交通便利，用户劳动成本低，同时用户数量多，供给过剩，因此定价低，这是与上节的分析相一致的。为了刻画任务位置对定价的影响，我们认为可以通过选定若干任务的分布中心，通过任务点位置与中心的距离远近给出定价决策的一部分。求解中心可以使用K-均值聚类分析进行。

\subsection{定价模型的建立}

\subsubsection{数据的网格化处理}
找出已完成项目中任务分布的经纬度边界，记经度区间为$[L_{min},L_{max}]$,记纬度区间为$[B_{min},B_{max}]$,将经纬度各划为50等分，则区域被划分为2500各小区域，每个小区域的经度、纬度跨度为$$\Delta L=\frac{L_{max}-L_{min}}{50},\quad \Delta B=\frac{B_{max}-B_{min}}{50}$$则对于给定的经纬坐标$(L,B)$，其所在的经纬网格的行列数为$$i=\lceil \frac{L-L_{min}}{\Delta L}\rceil,\quad j=\lceil \frac{B-B_{min}}{\Delta B}\rceil$$据此可以得出每个任务所在的网格，以及在此区域内的会员所在的网格。

\subsubsection{影响因子的确定}
根据问题分析，任务的定价有四项影响因子，即任务位置、所在网格的任务数密度、所在网格的会员数密度、所在网格的会员完成任务的能力。我们对其具体定义如下：
\begin{enumerate}
    \item 任务所在位置距离其聚类中心的距离$R_i$

          由问题分析中的描述，越接近道路和城市中心，任务定价也就越低，我们通过使用K-均值聚类分析把所有的任务分为若干组，每组有一个中心点，用任务距离中心点的距离$R_i$作为影响定价决策的一个因子，且它们之间是正相关的关系。
    \item 任务所在网格的任务数量$q_i$

          对于第$i$项任务，其所在网格内的任务总数记为$q_i$。$q_i$越大，则区域内的服务需求越多，定价与$q_i$应当成正相关关系。
    \item 任务所在网格的会员数量$Q_i$

          与上一影响因子相似，网格内会员数量越多，则服务供给越多，定价与$Q_i$应当成负相关关系。
    \item 任务所在网格的会员平均完成能力$\overline{cp_i}$

          考虑到每个会员的信誉值、预定限额和开始预定时间各不相同，只考虑会员个数并不能非常准确地反映出区域内地服务供给情况。因此我们提出会员的“任务完成能力”$cp_i$一项指标，信誉值越高、预定限额越大、开始预定时间越早的会员，其完成能力就越大。我们可以通过熵权法，用这些指标得到会员的完成能力。之后便可以计算在每个网格内的会员平均完成能力$\overline{cp_i}$。
\end{enumerate}

\subsubsection{用灰色关联分析求定价相关性}

根据以上的分析，我们得到了与任务定价相关的四个影响因子，我们通过灰色关联分析可以求解出这四个因子与定价的关联度，由此可以得到已完成项目的任务定价规律。

为了分析项目中有未完成任务的原因，可以分别把完成的任务和未完成的任务单独计算其关联度，得到灰色关联度矩阵，计算每一个影响因子的两者差值，可以分析出任务未完成可能的与定价有关的原因。

\subsection{定价模型的求解}
\subsubsection{数据网格化，计算$q_i,Q_i$}

我们首先找出附件一所给出的已完成项目中任务分布的经纬度边界：经度区间为$[L_{min},L_{max}]=[112.6,114.5]$,纬度区间为$[B_{min},B_{max}]=[22.46,23.9]$,将经纬度各划为50等分为$\Delta L=0.038,\quad \Delta B=0.0288$,由此根据模型中的公式可以确定区域内任一点所在的网格的行列数。

在将区域网格化后，可以计算出每个网格中的任务数量$q_i$和会员数量$Q_i$，由此我们便可以得到两个影响因子。

\subsubsection{K-均值聚类分析确定影响因子$R_i$}

根据对问题分析中的任务分布散点图的观察，我们发现任务大致分布在四个相对集中的区域，因此我们使用用spss的K-均值分析方法对任务的位置进行分析，将其分为四类，得到每一类的中心点。运行结果如下：
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{2.png}
    \caption{K-均值分析得到的任务中心点}
    \label{图}
\end{figure}
根据分析结果，可以求出每个任务点距离它的中心点的距离$R_i$,于是我们就得到了另一个定价的影响因子。

\subsubsection{熵权法确定用户完成能力}

我们取用户的预定限额和开始预定时间这两个指标，使用熵权法确定用户的完成能力。设第$k$个会员的预定限额为$x_{k1}$，这是第一个指标。对于开始预定时间，我们观察数据可以发现最早为6:30，最晚为8:00,我们取$x_{k2}=\frac{1}{\Delta t}$作为第二个指标，其中$\Delta t$是开始预定时间与6:00相差的分钟数（若恰为6:00，则直接令$x_{k2}=1/2$。这样我们就获得了将要代入熵权法计算的两个指标$x_{k1},x_{k2}$。这两个指标与要确定的完成能力都是正相关的，我们首先把它们进行归一化：
$$x_{kj}^\prime=\frac{x_{kj}-\min_{k} \{x_{kj}\}}{\max_{k} \{x_{kj}\} - \min_{k} \{x_{kj}\}}$$
其中$x_{kj}^\prime$是第k名会员第j个指标经过归一化后的值。然后计算第j个指标下，第k名会员所占该指标的比重
$$p_{kj}=\frac{x_{kj}^\prime}{\sum_{k} x_{kj}^\prime}$$
然后计算第j项指标(j=1,2)的熵值：
$$e_j=-K\sum_{k} (p_{kj}\ln p_{kj}),\quad K=1/ln(1875)$$
计算信息熵冗余度和各项指标的权值：
$$d_j=1-e_j,\quad \lambda_j=\frac{d_j}{\sum_j d_j}$$
则一名会员的任务完成能力为
$$cp_k=\lambda_1x_{k1}+\lambda_2x_{k2}$$
经过计算，我们得到$\lambda_1=0.37021299,\quad \lambda_2=0.62978701$
再对每一个网格内的会员，计算其平均完成能力$\overline{cp_i}$,这时我们就得到了全部的定价影响因子。

\subsubsection{灰色关联分析确定关联度}

通过对任务定价与四个影响因子进行灰色关联分析，得到如下的灰色关联度矩阵：
\begin{table}[H]
    \centering
    \caption{任务定价的灰色关联度矩阵}
    \label{tab:表}
    \begin{tabular}{|c|c|c|c|c|}
        \hline
                         & $R$      & $q$      & $Q$      & $\overline{cp}$ \\ \hline
        完成的任务集合   & 0.974877 & 0.961805 & 0.948759 & 0.916587        \\ \hline
        未完成的任务集合 & 0.987225 & 0.979727 & 0.971405 & 0.958755        \\ \hline
        差值             & 0.017922 & 0.022646 & 0.042169 & 0.012348        \\ \hline
    \end{tabular}
\end{table}
通过分析，我们发现四个影响因子都对定价有很显著的影响，其中影响最大的是任务与所在区域中心点的距离，且与之成正相关。

\subsubsection{任务未完成原因的分析}
通过计算完成和未完成的任务集合对应的灰色相关度得差值，我们发现相关度相差最大的影响因子是任务所在网格的会员个数。这反映出任务不被完成的原因主要是任务定价对会员数密度不够敏感，在少有会员分布的区域，任务价格不足以吸引足够的用户去完成，因而造成了许多任务的难以完成。

\input{problem2.tex}
\input{problem3.tex}

\section{问题四的建模与求解}
\subsection{问题四的分析}
问题四要求给出附件三中的新项目的任务定价方案，任务数据只有位置信息。首先考虑，新项目的任务定价方案基于之前建立的定价模型。根据模型三的得到的结果，是在同时满足打包和多目标优化情况下的结果，因此客观反映了定价及完成情况与决策变量的规律，所以考虑基于模型三的结果，建立神经网络预测模型四的结果。

仿照模型一确定任务的四类基本聚类中心，然后参照模型三对所有任务进行聚类，即把任务进行打包。根据模型三，知道结果满足与决策变量的可观规律，因此取任务的经纬度和到基本聚类中心的距离最小值作为决策变量。把模型三中的决策变量和被解释变量作为训练数据，根据附录三聚类打包得到的新任务集合，得到神经网络的预测自变量，从而根据已经训练好的神经网络，预测出最终定价方案和任务完成情况。

\subsection{模型的建立}
首先仿照模型一确定任务的四类基本聚类中心，然后参照模型三对所有任务进行聚类，即把任务进行打包。

利用问题三中设计打包方案的聚类分析法对新任务也进行联合打包发布。新
任务中每一项任务都位于四类区域之一，计算每一项任务到其所属区域中心点的距离$i_{ij}$。本问题以位置坐标经纬度和$i_{ij}$为输入层，以每包对应的价格和任务完成情况为输出层，以问题三中定价方案中各个包的位置坐标经纬度和$i_{ij}$以及每包对应的价格和任务完成情况为学习样本，建立如下的三输入俩输出BP神经网络模型：
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{3.jpg}
    \caption{神经网络模型}
    \label{图}
\end{figure}


\section{模型总结}
\subsection{模型一}

优点：

1.从定性与定量的两个角度分析任务的定价规律，通过图像直观清晰地观察定价
的定性规律，再定量给出影响因子对定价规律的影响程度。

2.利用空间数据离散化的思想，将任务分布的经纬度区间划分为等面积的网格区
域，便于统计每一个网格区间内的任务与会员的相关数据，计算影响因子的数值。

3.对任务的位置信息进行K-Means 分析，将其划分为四类，得到每一个任务到相
应中心点的距离，相当准确、细致地定量分析了任务与中心点之间的距离这个影
响因子对定价规律的影响。

4.灰色关联分析很好地避免了多元回归分析中拟合度较低的问题，系统地定量分
析了四大影响因子对任务定价规律的影响。

缺点：

1.各影响因子之间不可避免地存在相关性，未能充分考虑到影响因子之间的交互
作用。

2.考虑每个网格区域内的任务与会员数据时，对于分布在网格区域边界周围的任
务而言，会影响定价影响模型的精度。

\subsection{模型二}

优点：

5.建立任务对用户的吸引度矩阵，通过计算与比较得到每一个任务的吸引度阈值，
提供了每一个任务能否被完成的判断准则。

6.在设立模型约束条件时，不仅从企业的目标优化角度考虑，同时考虑到每位会
员不同的信誉值以及与之对应的预定开始时间和预定限额，模型的建立十分符合
任务被预定的实际情形。

7.以6:30 作为开始时间点，以3 分钟作为间隔，以时间为顺序考虑每个时间点
的情形，思考深入而全面。

缺点：

3.考虑的情况太过庞杂，需要获取的数据量十分巨大，给模型的求解与算法的实
现带来了相当大的困难。

\subsection{模型三}

优点：

8.在考虑任务的位置分布时，利用位置的经纬度坐标进行聚类分析，使任务的打
包方案设计准确又全面。

9.对于第一次聚类分析打包的任务过多的情况，将这一类里的任务提取出来做二
次聚类分析。运用二重嵌套聚类分析的方法，想法大胆又合理，保证打包方案的
全面性与可行性。

10.将设计的打包方案与问题二中的优化定价模型相结合来求解问题三，使得每
一问之间环环相扣、层层递进。

缺点：

5.在任务分布稀疏的地区，聚类分析得到的一类任务包中的任务位置并非那么集
中，对定价方案的设计存在一定影响。

4.吸引度矩阵中元素的计算公式以及吸引度阈值的确定存在一定的主观性。

\subsection{模型四}

优点：

1.问题四中新项目的定价利用问题二、三中的定价模型与打包机制，利用问题三
中的定价方案数据，通过BP 神经网络预测法给出新项目的定价方案，想法新颖
大胆，又具有合理性。

2.新项目的任务定价方案确定是基于问题一、二、三的分析与结论的，很好地检
验了前面模型的合理性与正确性。

缺点：

1.利用BP 神经网络预测出新的任务定价时，会忽略其他一些因素对定价的影响。

\begin{thebibliography}{9}%宽度9
    \bibitem[1]{1}
杜剑平，韩中庚，“互联网+”时代的出租车资源配置模型[J]，数学建模及
    其应用，2015,4(04):40-49+85. [2017-09-17].
    \bibitem[2]{2}
    卓金武，李必文，魏永生，秦健.MATLAB 在数学建模中的应用，北京：北京
    航空航天大学出版社，2014.9
    \bibitem[3]{3}
    姜启源，谢金星，叶俊，数学模型（第四版），北京：高等教育出版社，2011.1
\end{thebibliography}

\begin{appendices}
\end{appendices}
\end{document}